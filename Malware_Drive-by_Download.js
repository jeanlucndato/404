// La fonction principale pour cr√©er et tenter d'ex√©cuter le fichier blague.
function createAndRunFile() {
    // Contenu du script batch (.bat) avec la nouvelle blague
    var content = `@echo off
    REM Ce script utilise PowerShell pour activer la synth√®se vocale de Windows (SAPI).
    powershell -c "(New-Object -ComObject SAPI.SpVoice).Speak('Attention! Alerte critique! Votre caf√© n\'a pas √©t√© valid√© par le syst√®me. Veuillez ins√©rer une pi√®ce de deux euros ou toute la journ√©e sera en noir et blanc.')"
    exit`;

    // Cr√©ation d'un √©l√©ment de lien (<a>) invisible pour d√©clencher le t√©l√©chargement
    var element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
    element.setAttribute('download', 'blague_cafe.bat'); // Nouveau nom plus descriptif

    // Simuler le clic pour forcer le t√©l√©chargement
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);

    // Tentative d'ex√©cution automatique (qui sera bloqu√©e par la plupart des navigateurs)
    setTimeout(function () {
        var runFile = document.createElement('iframe');
        runFile.style.display = 'none';
        runFile.src = 'blague_cafe.bat';
        document.body.appendChild(runFile);

        // Nouvelle alerte apr√®s l'√©chec de l'ex√©cution pour continuer la blague
        alert("üö® Erreur du syst√®me ! Le 'Blague_Cafe.bat' a √©t√© t√©l√©charg√©, mais il demande une ex√©cution manuelle pour la v√©rification de vos cr√©dits caf√© ! ‚òï");
    }, 3000);
}

// Fonction ex√©cut√©e au chargement de la page.
window.onload = function () {
    // Alerte initiale plus pertinente
    alert("‚òï Tenez-vous pr√™t ! Le Syst√®me de Distribution de Caf√© (SDC) a d√©tect√© une anomalie... cliquez sur OK pour le diagnostic ! üòú");
    setTimeout(createAndRunFile, 2000); // Lancer la fonction apr√®s 2 secondes
};